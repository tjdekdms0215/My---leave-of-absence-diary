<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íœ´í•™ ì¼ê¸° ì“°ê¸° ğŸ“</title>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #f4f4f9; display: flex; justify-content: center; padding: 50px; }
        .write-container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); width: 100%; max-width: 500px; }
        h2 { text-align: center; color: #333; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #45a049; }
        .back-link { display: block; text-align: center; margin-top: 15px; color: #888; text-decoration: none; }
    </style>
</head>
<body>

    <div class="write-container">
        <h2>ğŸ“ ë‚˜ì˜ íœ´í•™ ê¸°ë¡ ì“°ê¸°</h2>
        
        <div class="input-group">
            <label>ì œëª©</label>
            <input type="text" id="title" placeholder="ì˜ˆ: ì²« ìœ ëŸ½ì—¬í–‰ê³¼ ë³µí•™ ì¤€ë¹„" />
        </div>
        <div class="input-group">
            <label>ë‚ ì§œ</label>
            <input type="text" id="date" placeholder="ì˜ˆ: 2026.02" />
        </div>
        <div class="input-group">
            <label>ì§§ì€ ì„¤ëª…</label>
            <input type="text" id="desc" placeholder="ì˜ˆ: ìš°ë‹¹íƒ•íƒ• í¬ë¥´íˆ¬ê°ˆ í›„ê¸°" />
        </div>
        <div class="input-group">
            <label>ìƒì„¸ ë‚´ìš©</label>
            <textarea id="content" placeholder="ì´ê³³ì— ìì„¸í•œ ì¼ê¸°ë¥¼ ì ì–´ì£¼ì„¸ìš”!" rows="6"></textarea>
        </div>
        
        <button onclick="savePost()">ğŸš€ ì¼ê¸° ì €ì¥í•˜ê¸°</button>

        <a href="index.html" class="back-link">ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <script>
        async function savePost() {
            // 1. ì¹¸ì— ì íŒ ê¸€ì”¨ë“¤ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì½ì–´ì˜µë‹ˆë‹¤.
            const title = document.getElementById('title').value;
            const date = document.getElementById('date').value;
            const desc = document.getElementById('desc').value;
            const content = document.getElementById('content').value;

            // ë¹ˆì¹¸ì´ ìˆìœ¼ë©´ ì €ì¥ ì•ˆ ë˜ê²Œ ë§‰ì•„ì£¼ê¸°!
            if(!title || !date) {
                alert("ì œëª©ê³¼ ë‚ ì§œëŠ” ê¼­ ì ì–´ì£¼ì„¸ìš”!");
                return;
            }

            try {
                // ğŸš¨ [ë§¤ìš° ì¤‘ìš”] ì•„ë˜ ì£¼ì†Œë¥¼ ë‹¤ì€ë‹˜ì˜ ë Œë”(Render) ë°±ì—”ë“œ ì£¼ì†Œë¡œ ì‹¹ ë°”ê¿”ì£¼ì„¸ìš”!!! ğŸš¨
                // ì˜ˆì‹œ: const url = 'https://my-backend-abcd.onrender.com/api/timeline';
                const url = 'https://my-leave-of-absence-diary.onrender.com/api/timeline'; 
                // fetch: íƒë°°ê¸°ì‚¬ë‹˜ì„ ë¶ˆëŸ¬ì„œ ë°±ì—”ë“œë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
                const response = await fetch(url, {
                    method: 'POST', // "ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì €ì¥í•´ ì¤˜!" ë¼ëŠ” ëœ»
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ title, date, desc, content }) // ê¸€ì”¨ë“¤ì„ ì˜ˆì˜ê²Œ í¬ì¥
                });

                if (response.ok) {
                    alert("ì¼ê¸°ê°€ ì„±ê³µì ìœ¼ë¡œ DBì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰");
                    window.location.href = 'index.html'; // ì €ì¥ ì„±ê³µí•˜ë©´ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ìë™ ì´ë™!
                } else {
                    alert("ì €ì¥ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì„œë²„ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.");
                }
            } catch (error) {
                console.error("ì—ëŸ¬ ë°œìƒ:", error);
                alert("ì„œë²„ì™€ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë Œë” ì£¼ì†Œë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”!");
            }
        }
    </script>

</body>
</html>