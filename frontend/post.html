<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ê¸° ì½ê¸°</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .post-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 50px;
        }
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            color: #6c5ce7;
            text-decoration: none;
            font-weight: bold;
        }
        .back-btn:hover { text-decoration: underline; }
        .post-title { font-size: 32px; color: #333; margin-bottom: 10px; }
        .post-date { color: #888; margin-bottom: 30px; }
        .post-content { font-size: 16px; line-height: 1.8; color: #444; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container" style="margin-top: 40px;">
        <a href="index.html" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        
        <main class="post-container" id="post-container">
            <p>ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
        </main>
    </div>

    <script>
        // 1. ì£¼ì†Œì°½ì—ì„œ ëª‡ ë²ˆ ì¼ê¸°ì¸ì§€(id) ì°¾ì•„ë‚´ëŠ” ì½”ë“œ
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');

        // 2. ì„œë²„ì—ì„œ í•´ë‹¹ ë²ˆí˜¸ì˜ ì¼ê¸°ë§Œ ê°€ì ¸ì˜¤ê¸°
        async function fetchPost() {
            try {
                // ë°±ì—”ë“œ ì„œë²„ì— "idë²ˆ ì¼ê¸° ì¤˜!" ìš”ì²­
                const response = await fetch(`http://localhost:3000/api/timeline/${postId}`);
                const post = await response.json();

                const container = document.getElementById('post-container');
                
                // ì‚¬ì§„ì´ ìˆìœ¼ë©´ ë„£ê³  ì—†ìœ¼ë©´ ë¹¼ê¸°
                const imageHtml = post.img ? `<img src="${post.img}" style="width:100%; border-radius:10px; margin-bottom:20px;">` : '';
                
                // í™”ë©´ì— ì˜ˆì˜ê²Œ ê·¸ë¦¬ê¸°
                container.innerHTML = `
                    <h1 class="post-title">${post.title}</h1>
                    <p class="post-date">${post.date}</p>
                    <hr style="border:0; height:1px; background:#eee; margin-bottom:30px;">
                    ${imageHtml}
                    <div class="post-content">${post.content}</div>
                `;
            } catch (error) {
                document.getElementById('post-container').innerHTML = "<p>ì¼ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ğŸ˜¢</p>";
            }
        }

        // 3. í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ ë°”ë¡œ í•¨ìˆ˜ ì‹¤í–‰!
        fetchPost();
    </script>
</body>
</html>